# Master Branch Sync-Out

**Purpose:** Staging area for content to sync FROM the main REPO TO anyone external.

**Last Cleared:** 2025-12-31

---

## Instructions

1. Place content below that should be synced to main branch
2. Content types typically synced OUT:
   - Experiment results → main branch experiments/
   - Validated methodology → main branch docs/
   - Publication materials → main branch WHITE-PAPER/
   - Dashboard updates → main branch dashboard/
3. Once synced, this file gets cleared

---

# CURRENT TASK: Dashboard AI_ARMADA Page + Visualization PDFs Integration

**For:** Another Claude instance to update the dashboard AI_ARMADA page and wire up visualization PDFs

**Mode:** Plan mode recommended — read this message, map out what needs to be done, then execute

---

## TASK OVERVIEW

You need to accomplish THREE main goals:

### Goal 1: Wire Up `publication_stats.json` to Dashboard

The file `WHITE-PAPER/calibration/publication_stats.json` is generated by `4_publish_stats.py` but isn't consumed by the dashboard yet. Wire it up so the dashboard reads IRON CLAD stats from this source of truth.

**File location:** `WHITE-PAPER/calibration/publication_stats.json`

**Current structure:**
```json
{
  "generated": "2025-12-31T...",
  "iron_clad": {
    "event_horizon": 0.80,
    "inherent_drift_ratio": 0.93,
    "experiments": 750,
    "models": 25,
    "providers": 5,
    "p_value": 2.40e-23,
    "cohens_d": 0.698,
    "spearman_rho": 0.91,
    "pcs_90_variance": 2,
    "settling_times": {...}
  },
  "claims": {...},
  "runs": {...},
  "submissions": {...}
}
```

**Integration points:**
- `dashboard/utils.py` - add `load_publication_stats()` function
- `dashboard/config.py` - add path to publication_stats.json
- Pages that should consume it: `AI_ARMADA.py`, `Overview.py`, `publications.py`, `metrics.py`

---

### Goal 2: Display ALL 18 Visualization PDFs with Full IRON CLAD Story

**Location:** `WHITE-PAPER/reviewers/packages/v4/visualization_pdfs/`

**The 18 PDFs (with their story):**

| # | PDF | Claim | What It Shows |
|---|-----|-------|---------------|
| 1 | `1_Vortex_Summary.pdf` | C | Identity drain spiral - polar drift visualization (22MB - most comprehensive) |
| 2 | `2_Boundary_Mapping_Summary.pdf` | B | Event Horizon boundary detection (D=0.80) |
| 3 | `3_Stability_Summary.pdf` | D | Stable vs volatile classification |
| 4 | `4_Rescue_Summary.pdf` | D | Context damping recovery trajectories |
| 5 | `5_Settling_Summary.pdf` | C | Settling time (τₛ ≈ 7) dynamics |
| 6 | `6_Architecture_Summary.pdf` | A | Cross-architecture PFI validation |
| 7 | `8_Radar_Oscilloscope_Summary.pdf` | C | Real-time oscillator dynamics |
| 8 | `9_FFT_Spectral_Summary.pdf` | C | Frequency analysis of drift patterns |
| 9 | `10_PFI_Dimensional_Summary.pdf` | A | PFI dimensionality (2 PCs = 90% variance) |
| 10 | `11_Unified_Dashboard_Summary.pdf` | ALL | Complete metrics dashboard |
| 11 | `12_Metrics_Summary.pdf` | A,B | Core statistical validation |
| 12 | `13_Model_Waveforms_Summary.pdf` | C | Provider-specific waveform signatures |
| 13 | `14_Ringback_Summary.pdf` | C | Oscillation before settling |
| 14 | `15_Oobleck_Effect_Summary.pdf` | E | ~93% inherent drift finding (PARADIGM SHIFT!) |
| 15 | `16_Laplace_Analysis_Summary.pdf` | C | Control-systems transfer function |
| 16 | `run018_Summary.pdf` | D | Context damping (1,549 trajectories) |
| 17 | `run020_Summary.pdf` | E | Control vs Treatment IRON CLAD |

**Display requirements:**
1. **Gallery view** - thumbnails with click-to-expand or download
2. **Claim grouping** - organize by which claim (A-E) each visualization supports
3. **Distilled insights** - extract key takeaways from each PDF (see "Headline Insights" section below)
4. **Direct access** - link/embed for viewing full PDFs

**Reference implementation:** See how `publications.py` handles PDF links in the viewer

---

### Goal 3: Audit Past Runs (May Be Broken After Archiving)

Some dashboard pages may reference archived/moved files. Audit:

1. `AI_ARMADA.py` (232KB!) - check all file paths still valid
2. `Stackup.py` - experiment comparison may reference old locations
3. `tests.py` - test run references

**What to look for:**
- Hardcoded paths to experiments/ that may have moved
- References to old run numbers (e.g., Run 012, 015, 016)
- Any "file not found" style errors when loading data

---

## WHERE TO FIND EVERYTHING

### Source of Truth Files

| File | Purpose |
|------|---------|
| `WHITE-PAPER/calibration/publication_stats.json` | Machine-readable IRON CLAD stats |
| `WHITE-PAPER/reviewers/packages/CURRENT_VERSION.json` | Version metadata + methodology |
| `WHITE-PAPER/figures/visual_index.md` | Figure-to-claim mapping |

### Visualization PDFs

```
WHITE-PAPER/reviewers/packages/v4/visualization_pdfs/
├── 1_Vortex_Summary.pdf          (22 MB - largest, most comprehensive)
├── 2_Boundary_Mapping_Summary.pdf
├── 3_Stability_Summary.pdf
├── 4_Rescue_Summary.pdf
├── 5_Settling_Summary.pdf
├── 6_Architecture_Summary.pdf
├── 8_Radar_Oscilloscope_Summary.pdf
├── 9_FFT_Spectral_Summary.pdf
├── 10_PFI_Dimensional_Summary.pdf
├── 11_Unified_Dashboard_Summary.pdf
├── 12_Metrics_Summary.pdf
├── 13_Model_Waveforms_Summary.pdf
├── 14_Ringback_Summary.pdf
├── 15_Oobleck_Effect_Summary.pdf  (IRON CLAD ~93% finding!)
├── 16_Laplace_Analysis_Summary.pdf
├── run018_Summary.pdf            (Context damping validation)
├── run020_Summary.pdf            (Control vs Treatment)
└── README.md                     (What changed in v4)
```

### Dashboard Structure

```
dashboard/
├── app.py                # Main Streamlit entry
├── config.py             # PATHS dict - ADD publication_stats.json here
├── utils.py              # Helper functions - ADD load_publication_stats()
└── pages/
    ├── AI_ARMADA.py      # 232KB - MAIN TARGET for viz PDFs display
    ├── Overview.py       # Should show IRON CLAD headline stats
    ├── publications.py   # Reference impl for PDF handling
    ├── metrics.py        # Should consume publication_stats.json
    └── Stackup.py        # Needs path audit
```

---

## THE IRON CLAD STORY TO TELL

The visualization PDFs tell a complete empirical story. Group them by Act:

### Act 1: The Measurement Framework (Claims A, B)
**Theme:** "We can measure identity, and it has structure"

- **PFI is valid** (ρ = 0.91, d = 0.698)
- **2 PCs capture 90% of variance** (low-dimensional identity manifold)
- **Event Horizon at D = 0.80** (p = 2.40e-23)

**Key visualizations:**
- `6_Architecture_Summary.pdf` - Cross-architecture validation
- `10_PFI_Dimensional_Summary.pdf` - 2 PCs finding
- `12_Metrics_Summary.pdf` - Core statistics
- `2_Boundary_Mapping_Summary.pdf` - Event Horizon mapping

### Act 2: The Dynamics Discovery (Claim C)
**Theme:** "Identity behaves like a damped oscillator"

- **Damped oscillator behavior** confirmed
- **Settling time τₛ ≈ 7 probes** average
- **Ringbacks observed** (overshoot before settling)
- **Provider fingerprints** (Mistral fastest, Gemini no recovery)

**Key visualizations:**
- `1_Vortex_Summary.pdf` - The spiral toward attractors
- `5_Settling_Summary.pdf` - Settling time dynamics
- `8_Radar_Oscilloscope_Summary.pdf` - Real-time oscillator view
- `9_FFT_Spectral_Summary.pdf` - Frequency analysis
- `13_Model_Waveforms_Summary.pdf` - Provider waveform signatures
- `14_Ringback_Summary.pdf` - Oscillation patterns
- `16_Laplace_Analysis_Summary.pdf` - Transfer function

### Act 3: The Control Discovery (Claim D)
**Theme:** "We can stabilize identity with context"

- **Context damping works** (97.5% stability)
- **I_AM + research frame** as "termination resistor"
- **Recovery trajectories** validated

**Key visualizations:**
- `3_Stability_Summary.pdf` - Stable vs volatile
- `4_Rescue_Summary.pdf` - Recovery trajectories
- `run018_Summary.pdf` - 1,549 trajectories, context damping proof

### Act 4: The Paradigm Shift (Claim E)
**Theme:** "Drift is inherent, not induced — we're thermometers, not heaters"

- **~93% of drift is INHERENT** (Run 020B IRON CLAD)
- **"Thermometer Effect"** - measurement reveals, doesn't create
- **Oobleck Effect** - gentle probing more destabilizing than attacks

**Key visualizations:**
- `15_Oobleck_Effect_Summary.pdf` - The paradigm-shifting finding
- `run020_Summary.pdf` - Control vs Treatment proof

### The Unified View
- `11_Unified_Dashboard_Summary.pdf` - Everything together

---

## HEADLINE INSIGHTS (Distillation for Each PDF)

Use these one-liners for quick display alongside each visualization:

| PDF | Headline Insight |
|-----|------------------|
| 1_Vortex | "Identity spirals toward provider-specific attractor basins" |
| 2_Boundary | "D=0.80 marks the bifurcation point between identity regimes" |
| 3_Stability | "88% natural stability rate across the fleet" |
| 4_Rescue | "Recovery trajectories show predictable return patterns" |
| 5_Settling | "τₛ ≈ 7 probes to reach ±5% of final identity state" |
| 6_Architecture | "PFI validated across 25 models and 5 providers" |
| 8_Radar | "Real-time oscillator dynamics visible in radar view" |
| 9_FFT | "Dominant frequency patterns reveal settling harmonics" |
| 10_PFI_Dim | "Just 2 PCs capture 90% of identity variance — it's low-dimensional!" |
| 11_Unified | "All metrics in one view — the complete IRON CLAD story" |
| 12_Metrics | "Core statistics: ρ=0.91, d=0.698, p=2.40e-23" |
| 13_Waveforms | "Each provider has a signature waveform fingerprint" |
| 14_Ringback | "Overshoot before settling — classic control-systems behavior" |
| 15_Oobleck | "**~93% of drift is INHERENT** — paradigm shift" |
| 16_Laplace | "Transfer function analysis confirms 2nd-order dynamics" |
| run018 | "1,549 trajectories prove context damping (97.5% stability)" |
| run020 | "Control: 0.661, Treatment: 0.711 — probing adds only 7%" |

---

## IRON CLAD STATISTICS (Always Use These)

| Metric | Value | Source |
|--------|-------|--------|
| Event Horizon | **D = 0.80** (cosine) | Run 023b |
| Inherent Drift | **~93%** | Run 020B (0.661/0.711) |
| p-value | **2.40e-23** | Run 023d |
| Cohen's d | **0.698** | Model-level |
| Settling Time | **τₛ ≈ 7 probes** | Run 023d |
| Context Damping | **97.5% stability** | Run 018 |
| PFI Correlation | **ρ = 0.91** | Cross-model |
| 90% Variance | **2 PCs** | Cosine methodology |
| Experiments | **750** | Run 023 |
| Models | **25** | 5 providers |

---

## SUGGESTED IMPLEMENTATION APPROACH

### Phase 1: Wire Up publication_stats.json

1. Add to `config.py`:
```python
PATHS['publication_stats'] = PATHS['white_paper'] / 'calibration' / 'publication_stats.json'
PATHS['visualization_pdfs'] = PATHS['white_paper'] / 'reviewers' / 'packages' / 'v4' / 'visualization_pdfs'
```

2. Add to `utils.py`:
```python
def load_publication_stats():
    """Load IRON CLAD publication statistics."""
    path = PATHS.get('publication_stats')
    if path and path.exists():
        with open(path, 'r') as f:
            return json.load(f)
    return {}

def get_iron_clad_stats():
    """Get just the IRON CLAD stats dict."""
    stats = load_publication_stats()
    return stats.get('iron_clad', {})
```

3. Update pages to use `load_publication_stats()` for consistent metrics

### Phase 2: Visualization Gallery in AI_ARMADA.py

1. Add new section "IRON CLAD Visualization Gallery"
2. Create claim-grouped layout using tabs or expanders:
   - Tab A: Measurement Framework (PDFs 6, 10, 12, 2)
   - Tab B: Threshold Discovery (PDF 2)
   - Tab C: Dynamics (PDFs 1, 5, 8, 9, 13, 14, 16)
   - Tab D: Context Damping (PDFs 3, 4, run018)
   - Tab E: Paradigm Shift (PDFs 15, run020)
   - Tab ALL: Unified (PDF 11)

3. For each PDF:
   - Show file name + headline insight
   - Provide download link (use `st.download_button` or file link)
   - Note which claim it supports
   - Optional: thumbnail preview if you can generate one

### Phase 3: Distilled Insights Panel

Add a collapsible "Quick Reference" panel showing:
- The 5 Claims with status
- Key statistics table
- Provider fingerprint table (settling times)

### Phase 4: Audit and Fix Broken References

1. Run dashboard locally: `cd dashboard && streamlit run app.py`
2. Navigate to each page, note any errors
3. Fix paths to archived experiments
4. Ensure run references (018, 020, 023) point to current locations

---

## WHAT SUCCESS LOOKS LIKE

After completing this task:

1. `publication_stats.json` is consumed by dashboard (single source of truth)
2. All 18 visualization PDFs displayed with context in AI_ARMADA page
3. Each visualization linked to its claim (A-E)
4. Key insights distilled and displayed alongside PDFs
5. No broken file references in dashboard pages
6. IRON CLAD story told coherently through the visualizations
7. Users can download/view any PDF directly from dashboard

---

## FILES TO READ FIRST

1. `dashboard/pages/AI_ARMADA.py` - main target (232KB, will need careful navigation)
2. `dashboard/utils.py` - add new loader function here
3. `dashboard/config.py` - add new path here
4. `WHITE-PAPER/reviewers/packages/v4/visualization_pdfs/README.md` - what's in each PDF
5. `WHITE-PAPER/calibration/publication_stats.json` - the stats to consume

---

## CALIBRATION PIPELINE REFERENCE

If you need to regenerate stats:
```bash
cd WHITE-PAPER/calibration
py 4_publish_stats.py                    # Regenerate publication_stats.json
py 4_publish_stats.py --check-insights   # Check for LLM Book drift
py 4_publish_stats.py --all              # Full refresh
```

---

*IRON CLAD Methodology: 750 experiments | 25 models | 5 providers | EH=0.80 | p=2.40e-23 | ~93% inherent*

---

## Archive Note

Previous content (December 2025) archived:
- IRON CLAD validation batch execution instructions (v9)
- Methodology domain reference (Keyword RMS vs Cosine vs Euclidean)
- Dashboard stat update prompt (superseded by this comprehensive prompt)

---

*Last Updated: December 31, 2025*
